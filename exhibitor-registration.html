<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>STEM Community Day - Exhibitor Registration</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link href="/data/bootstrap.min.css" rel="stylesheet">
<!--[if lt IE 9]>
    <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="shortcut icon" href="http://www.bootply.com/bootstrap/img/thumbs/favicon.ico">
<link rel="apple-touch-icon" href="http://www.bootply.com/bootstrap/img/thumbs/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="http://www.bootply.com/bootstrap/img/thumbs/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="http://www.bootply.com/bootstrap/img/thumbs/apple-touch-icon-114x114.png">
<link rel="stylesheet" href="/data/styles.css"/>

<script type="text/javascript" src="http://www.google.com/jsapi"></script>

</head>
    
    
<body>

<div class="navbar navbar-default">
  <div class="container">
    <a class="navbar-brand">STEM</a>
    <ul class="nav navbar-nav ">
        <li><a href="/">Home</a></li>
        <li><a href="mailto:stemday@cnu.edu">Contact</a></li>
        <li class="divider-vertical"></li>
    </ul>
    <ul class="nav navbar-nav navbar-right">
        <li class="active"><a>Register</a></li>
    </ul>
  </div>
</div>

<div class="container semi-transparent" id="main-container">

    <div class="jumbotron text-center">
        <div class="pic pic-left"></div>
        <div class="pic pic-right"></div>
    </div>

    <div class="row" id="registration-information">

        <div class="col-lg-6">
            <h4 class="intro-top-fancy">Contact First Name</h4>
            <p class="intro-top"><input class="register-input" type="text" placeholder="Enter your first name..."/></p>
          
            <h4 class="intro-top-fancy">Contact Last Name</h4>
            <p class="intro"><input class="register-input" type="text" placeholder="Enter your last name..."/></p>

            <h4 class="intro-top-fancy">Address</h4>
            <p class="intro"><input class="register-input" type="text" placeholder="Enter an address for the organization..."/></p>

            <h4 class="intro-top-fancy">State</h4>
            <p class="intro"><input class="register-input" type="text" placeholder="Enter your organization's state..."/></p>

            <h4 class="intro-top-fancy">Phone</h4>
            <p class="intro"><input class="register-input" type="text" placeholder="Enter a phone number..."/></p>

            <h4 class="intro-top-fancy">Will you require any equipment?</h4>
            <p class="intro"><input class="register-input" type="text" placeholder="List anything you might need to present..."/></p>
            <div class="spacer"></div>
        </div>

        <div class="col-lg-6">
            <h4 class="intro-top-fancy">What is your organization?</h4>
            <p class="intro-top"><input class="register-input" type="text" placeholder="Enter your organization..."/></p>

            <h4 class="intro-top-fancy">Type of organization?</h4>
            <p class="intro"><input class="register-input" type="text" placeholder="Enter your organization's type..."/></p>

            <h4 class="intro-top-fancy">City</h4>
            <p class="intro"><input class="register-input" type="text" placeholder="Enter a city..."/></p>

            <h4 class="intro-top-fancy">Zip Code</h4>
            <p class="intro"><input class="register-input" type="text" placeholder="Enter your organization's zip code..."/></p>

            <h4 class="intro-top-fancy">E-mail</h4>
            <p class="intro"><input class="register-input" type="text" placeholder="Enter an e-mail address..."/></p>

            <h4 class="intro-top-fancy">What will be the type of your display?</h4>
            <p class="intro"><input class="register-input" type="text" placeholder="In order to exhibit, I will need..."/></p>

            <div class="spacer"></div>
        </div>

        <div class="col-lg-6" style="clear:left;">
            <div class="button register-button button-active-checkbox well well-lg" id="checkbox-water">
                <a class="block" target="_blank"></a>
                Will you need access to water? ($10)
            </div> 
        </div>

        <div class="col-lg-6">
            <div class="button register-button button-active-checkbox well well-lg" id="checkbox-electricity">
                <a class="block" target="_blank" id="checkbox-electricity"></a>
                Will you need access to electricity? ($10)
            </div> 
        </div>

    </div><!--.row-->

    <div class="row">

        <div class="spacer"></div>
        <div class="col-lg-12">
            <hr />
            <p style="color:rgba(0,0,0,0.7);text-align:center;">Please note that there is a $75 registration fee to sign up as an exhibitor for STEM Day.</p>
            <hr />
        </div>
        <div class="spacer"></div>

        <div class="col-lg-12" style="clear:left;">
            <div class="button register-button button-active2 well well-lg checkbox2">
                <a class="block" target="_blank" id="register-exhibitor"></a>
                Register as an exhibitor<span id="total-application-price-output"></span>
            </div> 
        </div>

        <div class="col-lg-12">
            <hr />
                <p style="color:rgba(0,0,0,0.7);text-align:center;">For additional information, email <a href="mailto:stemday@cnu.edu">stemday@cnu.edu</a></p>
            <hr />
    </div>
    </div>
</div> <!-- /container -->
        
<script type="text/javascript" src="/data/jquery.min.js"></script>
<script type="text/javascript" src="/data/bootstrap.min.js"></script>
<script type="text/javascript" src="/data/data.js"></script>
<script>

    var totalApplicationFee     = 75;

    // define Google Docs API variables and settings
    var GoogleDocs = {

        useServerAPICalls       : true,

        APIVersion              : '3.0',
        APIKey                  : 'AIzaSyBh8KtwWGuG2zGq3eRLX-mdjLQJeo8IXeY',
        APIEndpoint             : 'https://www.googleapis.com/drive/v2/',
        APISpreadSheetsEndpoint : 'https://spreadsheets.google.com/feeds/list/',
        APIEntryContentType     : 'application/atom+xml',

        OAuthEnpoint            : 'https://www.googleapis.com/auth/devstorage.read_write',

        defaultSpreadSheetId    : '1OeO8BrZ6BlhA2AwoMpmWj_RIh1wGtCeyEFJWgpU9Hts'

    };

    // define Google Docs API methods

    /**
     * retrieves a document from Google Docs using its ID.
     * if no ID is given, GoogleDocs.spreadsheetId is used.
     *
     * @param method    {String} id of google docs file
     * @param uri       {String} endpoint url where the request should be made
     * @param callback  {Function} function to be called after response is received
     */
    GoogleDocs.httpRequest      = function(method, uri, callback) {

        if(!callback || typeof callback != 'function') {
            callback = function() {};
        }

        if(GoogleDocs.useServerAPICalls) {
            uri = '/api/' + uri;
        }

        // create a new asynchronous http request object
        var http = new XMLHttpRequest();
        http.open(method, uri, true);
        http.send(null);

        http.addEventListener('readystatechange', function() {
            
            if(this.readyState == 4) {
                if(this.status == 200) {
                    // send response to callee
                    callback.call(this, null, this.responseText);
                } else {
                    // send error to callee
                    callback.call(this, this.responseText);
                }
            }

        });

    }

    /**
     * retrieves a document from Google Docs using its ID.
     * if no ID is given, GoogleDocs.spreadsheetId is used.
     *
     * @param fileID    {String}    id of google docs file
     * @param callback  {Function}  function to be called after response is received
     */
    GoogleDocs.getFileMetaData  = function(fileID, callback) {

        if(!fileID) {
            fileID = GoogleDocs.defaultSpreadSheetId;
        }

        // handle case where only a callback function is passed
        if(typeof fileID == 'function') {
            callback    = fileID;
            fileID      = GoogleDocs.defaultSpreadSheetId;
        }

        // create new http request
        GoogleDocs.httpRequest('GET', GoogleDocs.APIEndpoint + 'files/' + fileID + '?key=' + GoogleDocs.APIKey + '&v=' + GoogleDocs.APIVersion, callback);

    }

    /**
     * retrieves (cell) contents of a spreadsheet document from Google Docs using its ID.
     * if no ID is given, GoogleDocs.spreadsheetId is used.
     *
     * @param fileID    {String}    id of google docs file
     * @param callback  {Function}  function to be called after response is received
     */
    GoogleDocs.getSpreadsheetCells = function(fileID, callback) {

        if(!fileID) {
            fileID = GoogleDocs.defaultSpreadSheetId;
        }

        // handle case where only a callback function is passed
        if(typeof fileID == 'function') {
            callback    = fileID;
            fileID      = GoogleDocs.defaultSpreadSheetId;
        }

        GoogleDocs.httpRequest('GET', GoogleDocs.APISpreadSheetsEndpoint + fileID + '/od6/public/full?alt=json', callback);

    }

    GoogleDocs.putSpreadSheetRow = function(fileID, rowContentObject, callback) {

        // {row1Title:row1Content, row2Title:row2Content, ...}

        if(!fileID) {
            fileID = GoogleDocs.defaultSpreadSheetId;
        }

        // handle case where only a callback function is passed
        if(typeof fileID == 'function') {
            callback    = fileID;
            fileID      = GoogleDocs.defaultSpreadSheetId;
        }

        var entry       = document.createElement('entry');
        entry.setAttribute('xmlns'      , 'http://www.w3.org/2005/Atom');
        entry.setAttribute('xmlns:gsx'  , 'http://schemas.google.com/spreadsheets/2006/extended');

        var testRow         = document.createElement('gsx:testRow');
        testRow.innerHTML   = 'this is a test row';

        entry.appendChild(testRow);        

        var xhr = new XMLHttpRequest();
        xhr.open('POST', '/api/post/' + GoogleDocs.APISpreadSheetsEndpoint + fileID + '/od6/private/full', true);
        xhr.setRequestHeader('Content-Type', 'application/atom+xml');
        xhr.send(entry);
        xhr.addEventListener('readystatechange', function() {
            if(this.readyState == 4) {
                console.log(this.responseText);
            }
        });

    }

    // define dom element references and styling options

    var inputFields             = document.getElementsByClassName('register-input');
    var checkboxDivInputs       = document.getElementsByClassName('button-active-checkbox');
    var registerButton          = document.getElementById('register-exhibitor');
    var applicationPriceOutput  = document.getElementById('total-application-price-output');

    var checkboxDivInputOptions = {
        activeBackgroundColor : '#357ebd'
    };

    // attach event listeners

    registerButton.addEventListener('click', function() {
        handleRegistration();
    });

    inputFields.item(0).focus();

    for(var i = 0; i < checkboxDivInputs.length; i++) {

        checkboxDivInputs.item(i).addEventListener('click', function() {

            if(!this.isChecked) {

                totalApplicationFee += 10;
                applicationPriceOutput.innerHTML = ' ($' + totalApplicationFee + ')';

                this.isChecked = true;
                this.style.background = checkboxDivInputOptions.activeBackgroundColor;
                return;
            }

            this.isChecked = false;
            this.style.background = '';

            totalApplicationFee -= 10;
            applicationPriceOutput.innerHTML = ' ($' + totalApplicationFee + ')';

        });

    }

    // define registration functions

    function handleRegistration() {

        var allFieldsFilled = true;

        // grab all of the input fields 
        for(var i = 0; i < inputFields.length; i++) {
            
            if(inputFields.item(i).value == '') {
                inputFields.item(i).placeholder = 'This information is required.';
                allFieldsFilled                 = false;
            }

        }

        if(!allFieldsFilled) {
            registerExhibitor();
        } else {
            // scroll page slowly back to registration form
            $('html,body').animate({
                scrollTop : $('#registration-information').offset().top
            }, 300);

        }

    }

    function registerExhibitor() {
        // test the Google Docs API
        GoogleDocs.putSpreadSheetRow(function(error, data) {
            
            if(error) {
                return console.log('<GoogleDocs> ERR: ' + error);
            }

            console.log(data);

        });

    }

</script>
</body>
</html>